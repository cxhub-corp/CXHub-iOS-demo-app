# Notify-demo-app

## Описание приложения

**NB: перед использованием данного приложения внимательно изучите файл README.md для пакета CXHubSDK, а также инструкцию ниже**

Данное приложение демонстрирует интеграцию CXHubSDK.
В проект включены примеры как на Objective-C, так и на Swift.

Для запуска на устройстве проект содержит несколько target-модулей.
Компоненты, относящиеся к Objective-C примерам имеют суффикс `objc`,
относящиеся к Swift - `swift`

Каждый пример (Objective-c, Swift) содержит 3 компонента: основное приложение, NotificationService extension, Notification Content extension

После выполнения подключения библиотеки и настройки приложения (см. ниже) для сборки и запуска, необходимо выбрать target: notify-demo-app-objc (для objective-c) или notify-demo-app-swift (для swift). 

Приложение демонстрирует базовые возможности библиотеки при обработке входящих push-нотификаций и inApp.
Для демонстрации работы приложения, необходимо:
- произвести настройку приложения (см. ниже)
- разрешить получение push-нотификаций
- после запуска приложения отправить через web-интерфейс CXHub на устройство нотификацию желаемого типа (push или inApp, с соответствующими настройками\полями), 
    используя для этого InstanceID, отображенный на экране устройства (5 групп символов, разделенных `-`)
- при получении нотификации используйте debug-console (в режиме debug приложение выводит туда служебную информацию о работе библиотеки)

- в приложении доступны пользовательские звуки при получении пуша (guitar.wav, christmas.caf, metal.aiff). Для демонстрации этого функционала необходимо заполнить именем нужного звукового файла, включая расширение, соответствующее поле в web-интерфейсе конструктора нотификаций CXHub.

При необходимости получения большего количества деталей желательно использовать proxy-software для проксирования и анализа трафика, отправляемого с устройства. 
В этом случае вы увидите все сообщения, которые CXHubSDK отправляет (и получает) в зависимости от реакции пользователя на нотификации.  

## Подключение библиотеки

Для подключения используется CocoaPods.
Перед открытием xcworkspace необходимо подключить CXHubSDK, используя CocoaPods (Pod-файл расположен в корневом каталоге):

В Терминале необходимо выполнить команды:

```
pod deintegrate 
pod install
```
После этого все зависимости будут автоматически созданы.

## Настройка приложения

Для корректной работы необходимо произвести донастройку приложения:

### 1. Заполнить необходимую информацию (Team, BundleIdentifier, App Groups) в секции Signing&Capabilities (для всех target-модулей notify-demo-app)

### 2. Заполнить поле "App Groups -> Item0" в файле "notify-demo-app.entitlements" (значением из п.1)

### 2. Внести информацию в Notify.plist:

Необходимо заполнить:
```
Root :
 
    LibNotify : 
        Application : 
            ApiUrlHost | String | <your_CXHub_project_URL + /callback-service/ >
            IntegrationId | String | <your_integration_id_in_CXHub>
            Secret | String | <your_integration_secret_in_CXHub>
        
    SharedGroupId | String | <your_app_shared_group_identifier> //тот же, что и в п.1 выше
```

## После выполнения действий, описанных выше, приложение будет готово к работе.
